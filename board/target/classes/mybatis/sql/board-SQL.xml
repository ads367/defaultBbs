<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="boardDAO">
	
	<!-- 목록 조회 -->
	<select id="findAllBbs" resultType="BoardVO">
		SELECT bbs_id							AS bbsId
			 , title							AS title
			 , content							AS content
			 , read_cnt							AS readCnt
			 , updt_nm							AS updtNm
			 , DATE_FORMAT(updt_dt, '%Y-%m-%d')	AS updtDt
		  FROM default_bbs
		 WHERE use_at = 'Y'
	  ORDER BY updt_dt DESC
	</select>
	
	<!-- 게시판 아이디 가장 큰 값 호출 -->
	<select id="findBbsMaxId" resultType="java.lang.Integer">
		SELECT NVL(MAX(bbs_id), 0) AS bbsId
		  FROM default_bbs
	</select>
	
	<!-- 등록 -->
	<insert id="saveBbs" parameterType="BoardVO">
		INSERT INTO default_bbs (
			bbs_id
			, title
			, content
			, read_cnt
			, like_cnt
			, regist_nm
			, regist_dt
			, updt_nm
			, updt_dt
			, use_at
		) VALUES (
			#{bbsId}
			, #{title}
			, #{content}
			, 0
			, 0
			, #{registNm}
			, NOW()
			, #{updtNm}
			, NOW()
			, 'Y'
		)
	</insert>
	
</mapper>